<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            <!-- TODO -->
            Gestor de Presupuesto - Pon aquí tu nombre y apellidos
        </title>
    </head>

    <body>
        <div id="aplicacion">
            <div id="presupuesto">

            </div>

            <div id="gastos-totales">
            </div>

            <div id="balance-total">
            </div>

            <div id="listado-gastos-completo">
            </div>

            <div id="listado-gastos-filtrado-1">
            </div>

            <div id="listado-gastos-filtrado-2">
            </div>

            <div id="listado-gastos-filtrado-3">
            </div>

            <div id="listado-gastos-filtrado-4">
            </div>

            <div id="agrupacion-dia">
            </div>

            <div id="agrupacion-mes">
            </div>

            <div id="agrupacion-anyo">
            </div>

        </div>

        <!--
             TODO: Cargar el script js/generarDatosEstaticos.js

             Cargar script al final para que se haya cargado todo el HTML previo.
             El script se debe cargar con el atributo type="module" porque vamos a utilizar "import"
             https://es.javascript.info/modules-intro#que-es-un-modulo

        -->
        <script type="module">
            import {mostrarDatoEnId} from '/js/generarDatosEstaticos.js';
            import {mostrarPresupuesto} from '/js/generarDatosEstaticos.js';
            import {CrearGasto} from '/js/generarDatosEstaticos.js';
            import {anyadirGasto} from '/js/generarDatosEstaticos.js';
            import {actualizarPresupuesto} from '/js/generarDatosEstaticos.js';
            import {calcularTotalGastos} from '/js/generarDatosEstaticos.js';
            import {calcularBalance} from '/js/generarDatosEstaticos.js';
            import {listarGastos} from '/js/generarDatosEstaticos.js';
            import {mostrarGastoWeb} from '/js/generarDatosEstaticos.js';
            import {filtrarGastos} from '/js/generarDatosEstaticos.js';
            import {gastos} from '/js/generarDatosEstaticos.js';
            import {mostrarGastosAgrupadosWeb} from '/js/generarDatosEstaticos.js';
            import {agruparGastos} from '/js/generarDatosEstaticos.js';


            let valor1 = 23.44,
                valor2 = 14.25,
                valor3 = 18.60,
                valor4 = 60.42,
                valor5 = 206.45,
                valor6 = 195.78;

            let gasto1 = new CrearGasto("Compra carne", valor1, "2021-10-06", "casa", "comida" );
            let gasto2 = new CrearGasto("Compra fruta y verdura", valor2, "2021-09-06", "supermercado", "comida" );
            let gasto3 = new CrearGasto("Bonobús", valor3, "2020-05-26", "transporte" );
            let gasto4 = new CrearGasto("Gasolina", valor4, "2021-10-08", "transporte", "gasolina" );
            let gasto5 = new CrearGasto("Seguro hogar", valor5, "2021-09-26", "casa", "seguros" );
            let gasto6 = new CrearGasto("Seguro coche", valor6, "2021-10-06", "transporte", "seguros" );
            anyadirGasto(gasto1);
            anyadirGasto(gasto2);
            anyadirGasto(gasto3);
            anyadirGasto(gasto4);
            anyadirGasto(gasto5);
            anyadirGasto(gasto6);

            let node=document.getElementById('gastos-totales');
            let balance=document.getElementById('balance-total');
            let listadogastos=document.getElementById('listado-gastos-completo');
            let gastosfiltrados1=document.getElementById('listado-gastos-filtrado-1');
            let gastosfiltrados2=document.getElementById('listado-gastos-filtrado-2');
            let gastosfiltrados3=document.getElementById('listado-gastos-filtrado-3');
            let gastosfiltrados4=document.getElementById('listado-gastos-filtrado-4');
            let gastosagrupadosdia=document.getElementById('agrupacion-dia');
            let gastosagrupadosmes=document.getElementById('agrupacion-mes');
            let gastosagrupadosyear=document.getElementById('agrupacion-anyo');

            actualizarPresupuesto(1500);
            mostrarDatoEnId(presupuesto,mostrarPresupuesto());
            mostrarDatoEnId(node,Math.floor(calcularTotalGastos()));
            mostrarDatoEnId(balance,Math.floor(calcularBalance()));
            mostrarGastoWeb(listadogastos,listarGastos());
            mostrarGastoWeb(gastosfiltrados1,filtrarGastos({fechaDesde:"2021-09-01",fechaHasta:"2021-09-30"}));
            mostrarGastoWeb(gastosfiltrados2,filtrarGastos({valorMinimo:50}));
            mostrarGastoWeb(gastosfiltrados3,filtrarGastos({valorMaximo:200,etiquetasTiene:["seguros"]}));
            mostrarGastoWeb(gastosfiltrados4,filtrarGastos({valorMaximo:50, etiquetasTiene:["comida","transporte"]}));
            mostrarGastosAgrupadosWeb(gastosagrupadosdia,agruparGastos("dia"),"día");
            mostrarGastosAgrupadosWeb(gastosagrupadosmes,agruparGastos("mes"),"mes");
            mostrarGastosAgrupadosWeb(gastosagrupadosyear,agruparGastos("anyo"),"año");



        </script>

    </body>
</html>
