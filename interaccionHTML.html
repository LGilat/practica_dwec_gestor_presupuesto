<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            <!-- TODO -->
            Gestor de Presupuesto - Pon aquí tu nombre y apellidos
        </title>
    </head>

    <body>
        <div id="aplicacion">
            <div id="presupuesto">

            </div>

            <div id="gastos-totales">
            </div>

            <div id="balance-total">
            </div>

            <div id="listado-gastos-completo">
            </div>

            <div id="listado-gastos-filtrado-1">
            </div>

            <div id="listado-gastos-filtrado-2">
            </div>

            <div id="listado-gastos-filtrado-3">
            </div>

            <div id="listado-gastos-filtrado-4">
            </div>

            <div id="agrupacion-dia">
            </div>

            <div id="agrupacion-mes">
            </div>

            <div id="agrupacion-anyo">
            </div>

        </div>

        <!--
             TODO: Cargar el script js/generarDatosEstaticos.js

             Cargar script al final para que se haya cargado todo el HTML previo.
             El script se debe cargar con el atributo type="module" porque vamos a utilizar "import"
             https://es.javascript.info/modules-intro#que-es-un-modulo

        -->
        <script type="module">
        import {mostrarDatoEnId
            ,mostrarGastosAgrupadosWeb
            ,mostrarGastoWeb
            ,mostrarPresupuesto
            ,CrearGasto
            ,anyadirGasto
            ,actualizarPresupuesto
            ,calcularTotalGastos
            ,calcularBalance
            ,listarGastos
            ,filtrarGastos
            ,gastos
            ,agruparGastos
        } from '/js/generarDatosEstaticos.js';




            let node=document.getElementById('gastos-totales');
            let balance=document.getElementById('balance-total');
            let listadogastos=document.getElementById('listado-gastos-completo');
            let gastosfiltrados1=document.getElementById('listado-gastos-filtrado-1');
            let gastosfiltrados2=document.getElementById('listado-gastos-filtrado-2');
            let gastosfiltrados3=document.getElementById('listado-gastos-filtrado-3');
            let gastosfiltrados4=document.getElementById('listado-gastos-filtrado-4');
            let gastosagrupadosdia=document.getElementById('agrupacion-dia');
            let gastosagrupadosmes=document.getElementById('agrupacion-mes');
            let gastosagrupadosyear=document.getElementById('agrupacion-anyo');


            mostrarDatoEnId(presupuesto,mostrarPresupuesto());
            mostrarDatoEnId(node,Math.floor(calcularTotalGastos()));
            mostrarDatoEnId(balance,Math.floor(calcularBalance()));


            IterarGastos(listadogastos,listarGastos());
            IterarGastos(gastosfiltrados1,filtrarGastos({fechaDesde:"2021-09-01",fechaHasta:"2021-09-30"}));
            IterarGastos(gastosfiltrados2,filtrarGastos({valorMinimo:50}));
            IterarGastos(gastosfiltrados3,filtrarGastos({valorMaximo:200,etiquetasTiene:["seguros"]}));
            IterarGastos(gastosfiltrados4,filtrarGastos({valorMaximo:50, etiquetasTiene:["comida","transporte"]}));
            

            mostrarGastosAgrupadosWeb(gastosagrupadosdia,agruparGastos("dia"),"día");
            mostrarGastosAgrupadosWeb(gastosagrupadosmes,agruparGastos("mes"),"mes");
            mostrarGastosAgrupadosWeb(gastosagrupadosyear,agruparGastos("anyo"),"año");

            function IterarGastos(elemento,arraygastos){
                for(let gasto of arraygastos ){
                    mostrarGastoWeb(elemento,gasto);
                }
            }

        </script>

    </body>
</html>
